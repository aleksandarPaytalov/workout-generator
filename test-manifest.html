<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manifest Test - Workout Generator</title>
    <link rel="manifest" href="manifest.json">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f8fafc;
        }
        .test-container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #8b5cf6;
            margin-bottom: 10px;
        }
        .status {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        .success {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #10b981;
        }
        .error {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #ef4444;
        }
        .info {
            background: #dbeafe;
            color: #1e40af;
            border: 1px solid #3b82f6;
        }
        .manifest-data {
            background: #f1f5f9;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-family: monospace;
            font-size: 14px;
            overflow-x: auto;
        }
        button {
            background: #8b5cf6;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px 10px 0;
        }
        button:hover {
            background: #7c3aed;
        }
        .checklist {
            list-style: none;
            padding: 0;
        }
        .checklist li {
            padding: 8px 0;
            border-bottom: 1px solid #e2e8f0;
        }
        .checklist li:before {
            content: "‚úì ";
            color: #16a34a;
            font-weight: bold;
            margin-right: 8px;
        }
        .checklist li.pending:before {
            content: "‚è≥ ";
            color: #d97706;
        }
        .checklist li.error:before {
            content: "‚úó ";
            color: #dc2626;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üì± PWA Manifest Test</h1>
        <p>Testing manifest.json for Workout Generator PWA</p>

        <div id="status"></div>

        <h2>Test Results:</h2>
        <ul class="checklist" id="checklist">
            <li class="pending">Manifest file exists</li>
            <li class="pending">Valid JSON syntax</li>
            <li class="pending">All required fields present</li>
            <li class="pending">Theme color defined</li>
            <li class="pending">Icons array configured</li>
            <li class="pending">Display mode set to standalone</li>
        </ul>

        <h2>Manifest Data:</h2>
        <div class="manifest-data" id="manifestData">Loading...</div>

        <button onclick="testManifest()">üîÑ Reload Test</button>
        <button onclick="openDevTools()">üîß Open DevTools Instructions</button>
    </div>

    <script>
        async function testManifest() {
            const statusDiv = document.getElementById('status');
            const manifestDataDiv = document.getElementById('manifestData');
            const checklist = document.getElementById('checklist').children;

            try {
                // Fetch manifest.json
                const response = await fetch('manifest.json');
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const manifest = await response.json();

                // Update checklist
                checklist[0].className = ''; // File exists
                checklist[1].className = ''; // Valid JSON

                // Check required fields
                const requiredFields = ['name', 'short_name', 'start_url', 'display', 'icons'];
                const hasAllFields = requiredFields.every(field => manifest[field]);
                checklist[2].className = hasAllFields ? '' : 'error';

                // Check theme color
                checklist[3].className = manifest.theme_color ? '' : 'error';

                // Check icons
                checklist[4].className = (manifest.icons && manifest.icons.length > 0) ? '' : 'error';

                // Check display mode
                checklist[5].className = (manifest.display === 'standalone') ? '' : 'error';

                // Display manifest data
                manifestDataDiv.textContent = JSON.stringify(manifest, null, 2);

                // Show success status
                statusDiv.innerHTML = `
                    <div class="status success">
                        <strong>‚úì Success!</strong> Manifest loaded successfully.
                        <br><br>
                        <strong>Name:</strong> ${manifest.name}<br>
                        <strong>Short Name:</strong> ${manifest.short_name}<br>
                        <strong>Theme Color:</strong> <span style="display:inline-block;width:20px;height:20px;background:${manifest.theme_color};border:1px solid #ccc;vertical-align:middle;"></span> ${manifest.theme_color}<br>
                        <strong>Icons:</strong> ${manifest.icons.length} configured<br>
                        <strong>Display Mode:</strong> ${manifest.display}
                    </div>
                `;

            } catch (error) {
                checklist[0].className = 'error';
                statusDiv.innerHTML = `
                    <div class="status error">
                        <strong>‚úó Error!</strong> Failed to load manifest.json
                        <br><br>
                        ${error.message}
                    </div>
                `;
                manifestDataDiv.textContent = 'Failed to load manifest';
            }
        }

        function openDevTools() {
            alert(`To verify manifest in Chrome DevTools:

1. Press F12 to open DevTools
2. Go to "Application" tab
3. Click "Manifest" in the left sidebar
4. Verify all fields display correctly
5. Check that icons are listed (even if not yet created)

Note: Icons will show as 404 until Step 1.2 is completed.`);
        }

        // Run test on page load
        window.addEventListener('DOMContentLoaded', testManifest);
    </script>
</body>
</html>

