<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>You're Offline - Workout Generator</title>
    <meta name="theme-color" content="#8b5cf6" />
    <link rel="stylesheet" href="css/offline.css" />
  </head>
  <body>
    <div class="offline-container">
      <div class="connection-status" id="connectionStatus">
        <span class="status-dot"></span>
        <span>You're Offline</span>
      </div>

      <div class="offline-icon">ğŸ“¡</div>

      <h1>You're Offline</h1>
      <p class="subtitle">
        No internet connection detected. Don't worry, you can still use many
        features of the Workout Generator!
      </p>

      <div class="features">
        <h2>âœ¨ Available Offline Features</h2>
        <ul class="feature-list">
          <li class="feature-item">
            <div class="feature-icon">ğŸ“‹</div>
            <div class="feature-text">
              <div class="feature-title">View Workout History</div>
              <div class="feature-description">
                Access all your saved workouts and notes
              </div>
            </div>
          </li>
          <li class="feature-item">
            <div class="feature-icon">ğŸ’ª</div>
            <div class="feature-text">
              <div class="feature-title">Generate Workouts</div>
              <div class="feature-description">
                Create new balanced exercise routines
              </div>
            </div>
          </li>
          <li class="feature-item">
            <div class="feature-icon">â±ï¸</div>
            <div class="feature-text">
              <div class="feature-title">Workout Timer</div>
              <div class="feature-description">
                Track your exercise timing and rest periods
              </div>
            </div>
          </li>
          <li class="feature-item">
            <div class="feature-icon">ğŸ“„</div>
            <div class="feature-text">
              <div class="feature-title">Export to PDF</div>
              <div class="feature-description">
                Save your workouts as PDF files
              </div>
            </div>
          </li>
          <li class="feature-item">
            <div class="feature-icon">ğŸ¨</div>
            <div class="feature-text">
              <div class="feature-title">Full Functionality</div>
              <div class="feature-description">
                All features work without internet
              </div>
            </div>
          </li>
        </ul>
      </div>

      <div class="button-group">
        <button class="btn btn-primary" onclick="tryAgain()">
          ğŸ”„ Try Again
        </button>
        <a href="/" class="btn btn-secondary"> ğŸ  Go to Home </a>
      </div>
    </div>

    <script>
      // Check connection status
      function updateConnectionStatus() {
        const statusElement = document.getElementById("connectionStatus");
        if (navigator.onLine) {
          statusElement.className = "connection-status online";
          statusElement.innerHTML =
            '<span class="status-dot"></span><span>Back Online!</span>';
        } else {
          statusElement.className = "connection-status";
          statusElement.innerHTML =
            '<span class="status-dot"></span><span>You\'re Offline</span>';
        }
      }

      // Try to reload the page
      function tryAgain() {
        if (navigator.onLine) {
          window.location.reload();
        } else {
          // Show a message that we're still offline
          const btn = event.target;
          const originalText = btn.innerHTML;
          btn.innerHTML = "âŒ Still Offline";
          btn.style.background = "#ef4444";

          setTimeout(() => {
            btn.innerHTML = originalText;
            btn.style.background = "";
          }, 2000);
        }
      }

      // Listen for connection changes
      window.addEventListener("online", () => {
        updateConnectionStatus();
        // Auto-reload when back online
        setTimeout(() => {
          window.location.reload();
        }, 1000);
      });

      window.addEventListener("offline", updateConnectionStatus);

      // Initial check
      updateConnectionStatus();
    </script>
  </body>
</html>
