<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logger Test Suite</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }
        h1 {
            color: #667eea;
            margin-top: 0;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }
        h2 {
            color: #764ba2;
            margin-top: 30px;
        }
        .test-section {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 15px 0;
        }
        button {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        .btn-primary {
            background: #667eea;
            color: white;
        }
        .btn-success {
            background: #10b981;
            color: white;
        }
        .btn-warning {
            background: #f59e0b;
            color: white;
        }
        .btn-danger {
            background: #ef4444;
            color: white;
        }
        .btn-info {
            background: #3b82f6;
            color: white;
        }
        .btn-secondary {
            background: #6b7280;
            color: white;
        }
        .status {
            padding: 10px;
            border-radius: 6px;
            margin: 10px 0;
            font-weight: 600;
        }
        .status-dev {
            background: #dbeafe;
            color: #1e40af;
            border: 2px solid #3b82f6;
        }
        .status-prod {
            background: #d1fae5;
            color: #065f46;
            border: 2px solid #10b981;
        }
        .info-box {
            background: #fef3c7;
            border: 2px solid #f59e0b;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }
        .info-box strong {
            color: #92400e;
        }
        code {
            background: #f3f4f6;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            color: #dc2626;
        }
        .console-note {
            background: #1f2937;
            color: #f3f4f6;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🔧 Logger Test Suite</h1>
        
        <div id="environment-status"></div>

        <div class="info-box">
            <strong>📋 Instructions:</strong> Open the browser console (F12) to see the logger output. 
            Click the buttons below to test different logging scenarios.
        </div>

        <!-- Test 1: Environment Detection -->
        <div class="test-section">
            <h2>Test 1: Environment Detection</h2>
            <p>Verify that the logger correctly detects development vs production mode.</p>
            <div class="button-group">
                <button class="btn-info" onclick="testEnvironmentDetection()">
                    🔍 Check Environment
                </button>
            </div>
        </div>

        <!-- Test 2: Log Levels -->
        <div class="test-section">
            <h2>Test 2: Log Levels</h2>
            <p>Test all four log levels: debug, info, warn, error.</p>
            <div class="button-group">
                <button class="btn-secondary" onclick="testDebugLog()">
                    🐛 Debug Log
                </button>
                <button class="btn-info" onclick="testInfoLog()">
                    ℹ️ Info Log
                </button>
                <button class="btn-warning" onclick="testWarnLog()">
                    ⚠️ Warning Log
                </button>
                <button class="btn-danger" onclick="testErrorLog()">
                    ❌ Error Log
                </button>
                <button class="btn-primary" onclick="testAllLevels()">
                    🎯 Test All Levels
                </button>
            </div>
        </div>

        <!-- Test 3: Production Mode Simulation -->
        <div class="test-section">
            <h2>Test 3: Production Mode Simulation</h2>
            <p>Simulate production mode by disabling debug/info logs.</p>
            <div class="button-group">
                <button class="btn-warning" onclick="simulateProduction()">
                    🚀 Simulate Production
                </button>
                <button class="btn-success" onclick="restoreDevelopment()">
                    🛠️ Restore Development
                </button>
            </div>
            <div class="console-note">
                In production mode, only WARN and ERROR logs should appear in console.
            </div>
        </div>

        <!-- Test 4: Configuration Changes -->
        <div class="test-section">
            <h2>Test 4: Runtime Configuration</h2>
            <p>Test changing logger configuration at runtime.</p>
            <div class="button-group">
                <button class="btn-info" onclick="enableTimestamps()">
                    🕐 Enable Timestamps
                </button>
                <button class="btn-info" onclick="disableTimestamps()">
                    🕐 Disable Timestamps
                </button>
                <button class="btn-info" onclick="setLevelWarn()">
                    ⚠️ Set Level: WARN
                </button>
                <button class="btn-info" onclick="setLevelDebug()">
                    🐛 Set Level: DEBUG
                </button>
                <button class="btn-primary" onclick="showCurrentConfig()">
                    📋 Show Config
                </button>
            </div>
        </div>

        <!-- Test 5: Performance Test -->
        <div class="test-section">
            <h2>Test 5: Performance Test</h2>
            <p>Test logger performance with rapid logging (simulates timer tick spam).</p>
            <div class="button-group">
                <button class="btn-primary" onclick="performanceTest()">
                    ⚡ Run Performance Test (100 logs)
                </button>
                <button class="btn-danger" onclick="performanceTestProduction()">
                    🚀 Performance Test (Production Mode)
                </button>
            </div>
        </div>

        <!-- Test 6: Module Name Test -->
        <div class="test-section">
            <h2>Test 6: Module Name Display</h2>
            <p>Test logging from different "modules".</p>
            <div class="button-group">
                <button class="btn-info" onclick="testModuleNames()">
                    📦 Test Module Names
                </button>
            </div>
        </div>

        <div class="console-note">
            <strong>💡 Tip:</strong> Keep the console open to see all test results. 
            Use <code>LoggerConfig.getConfig()</code> in console to check current settings.
        </div>
    </div>

    <!-- Load Logger and Config -->
    <script src="js/utils/logger.js"></script>
    <script src="js/config/loggerConfig.js"></script>

    <!-- Test Functions -->
    <script>
        // Update environment status on load
        window.addEventListener('load', () => {
            updateEnvironmentStatus();
        });

        function updateEnvironmentStatus() {
            const isDev = Logger.isDevMode();
            const statusDiv = document.getElementById('environment-status');
            
            if (isDev) {
                statusDiv.className = 'status status-dev';
                statusDiv.innerHTML = '🛠️ <strong>Development Mode Active</strong> - All logs visible';
            } else {
                statusDiv.className = 'status status-prod';
                statusDiv.innerHTML = '🚀 <strong>Production Mode Active</strong> - Only warnings and errors visible';
            }
        }

        function testEnvironmentDetection() {
            console.log('\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━');
            console.log('🔍 TEST 1: Environment Detection');
            console.log('━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━');
            
            const isDev = Logger.isDevMode();
            const config = Logger.getConfig();
            
            console.log(`Environment: ${isDev ? '🛠️  Development' : '🚀 Production'}`);
            console.log(`Hostname: ${window.location.hostname}`);
            console.log(`Port: ${window.location.port || 'none'}`);
            console.log(`Protocol: ${window.location.protocol}`);
            console.log(`Logger Enabled: ${config.enabled ? '✅' : '❌'}`);
            console.log(`Log Level: ${config.level.toUpperCase()}`);
            console.log('━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n');
        }

        function testDebugLog() {
            Logger.debug('TestSuite', 'This is a DEBUG message', { data: 'sample data' });
        }

        function testInfoLog() {
            Logger.info('TestSuite', 'This is an INFO message', { status: 'success' });
        }

        function testWarnLog() {
            Logger.warn('TestSuite', 'This is a WARNING message', { warning: 'something might be wrong' });
        }

        function testErrorLog() {
            Logger.error('TestSuite', 'This is an ERROR message', { error: 'something went wrong' });
        }

        function testAllLevels() {
            console.log('\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━');
            console.log('🎯 TEST 2: All Log Levels');
            console.log('━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━');
            
            Logger.debug('TestSuite', 'DEBUG: Detailed debugging information');
            Logger.info('TestSuite', 'INFO: General information message');
            Logger.warn('TestSuite', 'WARN: Warning - something needs attention');
            Logger.error('TestSuite', 'ERROR: Error - something failed');
            
            console.log('━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n');
        }

        function simulateProduction() {
            console.log('\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━');
            console.log('🚀 TEST 3: Production Mode Simulation');
            console.log('━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━');
            console.log('Simulating production by setting level to "warn"...');
            
            LoggerConfig.setLevel('warn');
            
            console.log('\nTesting logs (only WARN and ERROR should appear):');
            Logger.debug('TestSuite', '❌ This DEBUG should NOT appear');
            Logger.info('TestSuite', '❌ This INFO should NOT appear');
            Logger.warn('TestSuite', '✅ This WARNING SHOULD appear');
            Logger.error('TestSuite', '✅ This ERROR SHOULD appear');
            
            console.log('━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n');
        }

        function restoreDevelopment() {
            console.log('\n🛠️ Restoring development mode (level: debug)...\n');
            LoggerConfig.setLevel('debug');
            testAllLevels();
        }

        function enableTimestamps() {
            LoggerConfig.update({ showTimestamp: true });
            Logger.info('TestSuite', 'Timestamps enabled - notice the time prefix');
        }

        function disableTimestamps() {
            LoggerConfig.update({ showTimestamp: false });
            Logger.info('TestSuite', 'Timestamps disabled');
        }

        function setLevelWarn() {
            LoggerConfig.setLevel('warn');
            Logger.debug('TestSuite', 'This debug message should NOT appear');
            Logger.warn('TestSuite', 'This warning SHOULD appear');
        }

        function setLevelDebug() {
            LoggerConfig.setLevel('debug');
            Logger.debug('TestSuite', 'Debug level restored - all messages visible');
        }

        function showCurrentConfig() {
            console.log('\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━');
            console.log('📋 Current Logger Configuration');
            console.log('━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━');
            console.log(LoggerConfig.getConfig());
            console.log('━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n');
        }

        function performanceTest() {
            console.log('\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━');
            console.log('⚡ TEST 5: Performance Test (Development Mode)');
            console.log('━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━');
            console.log('Generating 100 debug logs (simulating timer ticks)...');
            
            const startTime = performance.now();
            
            for (let i = 0; i < 100; i++) {
                Logger.debug('TimerController', `Timer tick - Remaining time: ${100 - i}s`);
            }
            
            const endTime = performance.now();
            const duration = (endTime - startTime).toFixed(2);
            
            console.log(`\n✅ Performance Test Complete`);
            console.log(`Time taken: ${duration}ms for 100 logs`);
            console.log(`Average: ${(duration / 100).toFixed(2)}ms per log`);
            console.log('━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n');
        }

        function performanceTestProduction() {
            console.log('\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━');
            console.log('🚀 TEST 5: Performance Test (Production Simulation)');
            console.log('━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━');
            console.log('Setting level to "warn" to simulate production...');
            
            LoggerConfig.setLevel('warn');
            
            console.log('Generating 100 debug logs (should be suppressed)...');
            
            const startTime = performance.now();
            
            for (let i = 0; i < 100; i++) {
                Logger.debug('TimerController', `Timer tick - Remaining time: ${100 - i}s`);
            }
            
            const endTime = performance.now();
            const duration = (endTime - startTime).toFixed(2);
            
            console.log(`\n✅ Performance Test Complete (Production Mode)`);
            console.log(`Time taken: ${duration}ms for 100 suppressed logs`);
            console.log(`Average: ${(duration / 100).toFixed(2)}ms per log`);
            console.log(`Notice: Logs were suppressed, performance improved!`);
            console.log('━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n');
            
            // Restore debug level
            LoggerConfig.setLevel('debug');
        }

        function testModuleNames() {
            console.log('\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━');
            console.log('📦 TEST 6: Module Name Display');
            console.log('━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━');
            
            Logger.info('WorkoutTimer', 'Timer started for exercise');
            Logger.info('TimerController', 'Timer UI updated');
            Logger.info('AudioManager', 'Playing start sound');
            Logger.info('UIController', 'Workout generated successfully');
            Logger.info('HistoryController', 'Workout saved to history');
            
            console.log('━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n');
        }
    </script>
</body>
</html>

